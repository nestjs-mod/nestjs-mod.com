"use strict";(self.webpackChunknestjs_mod_com=self.webpackChunknestjs_mod_com||[]).push([[5289],{1745:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var t=s(4848),o=s(8453);const r={},i="Adding the CI/CD config for deployment NestJS and Angular applications to a dedicated server using GitHub Actions",a={id:"en-posts/fullstack/2024-08-26",title:"Adding the CI/CD config for deployment NestJS and Angular applications to a dedicated server using GitHub Actions",description:"We register secret environment variables in github.",source:"@site/docs/en-posts/fullstack/2024-08-26.md",sourceDirName:"en-posts/fullstack",slug:"/en-posts/fullstack/2024-08-26",permalink:"/docs/en-posts/fullstack/2024-08-26",draft:!1,unlisted:!1,editUrl:"https://github.com/nestjs-mod/nestjs-mod.com/blob/master/docs/en-posts/fullstack/2024-08-26.md",tags:[],version:"current",frontMatter:{},sidebar:"enPostsSidebar",previous:{title:'Manual deployment of NestJS and Angular applications on a dedicated server via "Docker Compose" and "PM2"',permalink:"/docs/en-posts/fullstack/2024-08-22"},next:{title:"Accelerating the deployment of NestJS and Angular using public Github runners and creating intermediate Docker images",permalink:"/docs/en-posts/fullstack/2024-09-08"}},c={},d=[{value:"1. Adding a new environment",id:"1-adding-a-new-environment",level:3},{value:"2. Adding new environment variables",id:"2-adding-new-environment-variables",level:3},{value:"3. Installing the &quot;GitHub Actions&quot; runner on a dedicated server",id:"3-installing-the-github-actions-runner-on-a-dedicated-server",level:3},{value:"4. Launching the &quot;GitHub Actions&quot; runner on a dedicated server",id:"4-launching-the-github-actions-runner-on-a-dedicated-server",level:3},{value:"5. We connect to a dedicated server and set the &quot;PM2&quot; and &quot;Docker Compose&quot; modes and delete the Volume from the database",id:"5-we-connect-to-a-dedicated-server-and-set-the-pm2-and-docker-compose-modes-and-delete-the-volume-from-the-database",level:3},{value:"6. Since the launch of the runner consumes resources, we need to increase the server capacity",id:"6-since-the-launch-of-the-runner-consumes-resources-we-need-to-increase-the-server-capacity",level:3},{value:"7. Creating a workflow configuration for deployment in the &quot;Docker Compose&quot; mode",id:"7-creating-a-workflow-configuration-for-deployment-in-the-docker-compose-mode",level:3},{value:"8. Since the server has become a little slower, it is necessary to reconfigure the settings for running E2E tests for the frontend application and the tests themselves",id:"8-since-the-server-has-become-a-little-slower-it-is-necessary-to-reconfigure-the-settings-for-running-e2e-tests-for-the-frontend-application-and-the-tests-themselves",level:3},{value:"9. Commit the updates to the repository and see the result of the work in Github",id:"9-commit-the-updates-to-the-repository-and-see-the-result-of-the-work-in-github",level:3},{value:"Links",id:"links",level:3}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"adding-the-cicd-config-for-deployment-nestjs-and-angular-applications-to-a-dedicated-server-using-github-actions",children:"Adding the CI/CD config for deployment NestJS and Angular applications to a dedicated server using GitHub Actions"}),"\n",(0,t.jsx)(n.p,{children:"We register secret environment variables in github."}),"\n",(0,t.jsx)(n.p,{children:'Install the "GitHub Actions" runner on a dedicated server.'}),"\n",(0,t.jsx)(n.p,{children:'Setting up workflow for "GitHub Actions".'}),"\n",(0,t.jsx)(n.h3,{id:"1-adding-a-new-environment",children:"1. Adding a new environment"}),"\n",(0,t.jsxs)(n.p,{children:["Go to the address ",(0,t.jsx)(n.a,{href:"https://github.com/nestjs-mod/nestjs-mod-fullstack/settings/environments/new",children:"https://github.com/nestjs-mod/nestjs-mod-fullstack/settings/environments/new"})," and add the ",(0,t.jsx)(n.code,{children:"docker-compose-full"})," environment."]}),"\n",(0,t.jsx)(n.h3,{id:"2-adding-new-environment-variables",children:"2. Adding new environment variables"}),"\n",(0,t.jsxs)(n.p,{children:["Go to the parameters of the previously created environment and alternately add all the variables to the ",(0,t.jsx)(n.code,{children:"Environment secrets"})," section, at this stage you can already generate protected values for some variables."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"SERVER_ROOT_DATABASE_URL=postgres://postgres:DN7DHoMWd2D13YNH116cFWeJgfVAFO9e@nestjs-mod-fullstack-postgre-sql:5432/postgres?schema=public\nSERVER_APP_DATABASE_URL=postgres://app:9UwcpRh12srXoPlTSN53ZOUc9ev9qNYg@nestjs-mod-fullstack-postgre-sql:5432/app?schema=public\nSERVER_POSTGRE_SQL_POSTGRESQL_USERNAME=postgres\nSERVER_POSTGRE_SQL_POSTGRESQL_PASSWORD=DN7DHoMWd2D13YNH116cFWeJgfVAFO9e\nSERVER_POSTGRE_SQL_POSTGRESQL_DATABASE=postgres\nSERVER_DOMAIN=fullstack.nestjs-mod.com\nHTTPS_PORTAL_STAGE=production\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-installing-the-github-actions-runner-on-a-dedicated-server",children:'3. Installing the "GitHub Actions" runner on a dedicated server'}),"\n",(0,t.jsxs)(n.p,{children:["Go to the address ",(0,t.jsx)(n.a,{href:"https://github.com/nestjs-mod/nestjs-mod-fullstack/settings/actions/runners/new?arch=x64&os=linux",children:"https://github.com/nestjs-mod/nestjs-mod-fullstack/settings/actions/runners/new?arch=x64&os=linux"})," and there we will see commands for use on a dedicated server."]}),"\n",(0,t.jsx)(n.p,{children:"We connect to a dedicated server and run all the commands in turn."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'ssh root@194.226.49.162\nmkdir actions-runner && cd actions-runner\ncurl -o actions-runner-linux-x64-2.319.1.tar.gz -L https://github.com/actions/runner/releases/download/v2.319.1/actions-runner-linux-x64-2.319.1.tar.gz\necho "3f6efb7488a183e291fc2c62876e14c9ee732864173734facc85a1bfb1744464  actions-runner-linux-x64-2.319.1.tar.gz" | shasum -a 256 -c\ntar xzf ./actions-runner-linux-x64-2.319.1.tar.gz\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Console output"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'$ ssh root@194.226.49.162\nWelcome to Ubuntu 22.04.3 LTS (GNU/Linux 5.15.0-119-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Sat Aug 24 13:26:35 MSK 2024\n\n  System load:                      0.46630859375\n  Usage of /:                       73.6% of 24.05GB\n  Memory usage:                     52%\n  Swap usage:                       0%\n  Processes:                        171\n  Users logged in:                  0\n  IPv4 address for br-8ea5713b0ec7: 172.18.0.1\n  IPv4 address for docker0:         172.17.0.1\n  IPv4 address for eth0:            194.226.49.162\n\n * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s\n   just raised the bar for easy, resilient and secure K8s cluster deployment.\n\n   https://ubuntu.com/engage/secure-kubernetes-at-the-edge\n\nExpanded Security Maintenance for Applications is not enabled.\n\n50 updates can be applied immediately.\nTo see these additional updates run: apt list --upgradable\n\n11 additional security updates can be applied with ESM Apps.\nLearn more about enabling ESM Apps service at https://ubuntu.com/esm\n\n\nLast login: Wed Aug 21 22:43:04 2024 from 94.41.238.146\n\nroot@vps1724252356:~# mkdir actions-runner && cd actions-runner\nroot@vps1724252356:~/actions-runner#\n\nroot@vps1724252356:~/actions-runner# curl -o actions-runner-linux-x64-2.319.1.tar.gz -L https://github.com/actions/runner/releases/download/v2.319.1/actions-runner-linux-x64-2.319.1.tar.gz\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n100  208M  100  208M    0     0  11.5M      0  0:00:18  0:00:18 --:--:-- 12.3M\n\nroot@vps1724252356:~/actions-runner# echo "3f6efb7488a183e291fc2c62876e14c9ee732864173734facc85a1bfb1744464  actions-runner-linux-x64-2.319.1.tar.gz" | shasum -a 256 -c\nactions-runner-linux-x64-2.319.1.tar.gz: OK\n\nroot@vps1724252356:~/actions-runner# tar xzf ./actions-runner-linux-x64-2.319.1.tar.gz\n'})}),"\n",(0,t.jsx)(n.h3,{id:"4-launching-the-github-actions-runner-on-a-dedicated-server",children:'4. Launching the "GitHub Actions" runner on a dedicated server'}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Commands"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'export RUNNER_ALLOW_RUNASROOT="0" && ./config.sh --url https://github.com/nestjs-mod/nestjs-mod-fullstack --token SOME_RANDOM_CHARS\nsudo ./svc.sh install\nsudo ./svc.sh start\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Console output"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"root@vps1724252356:~/actions-runner# export RUNNER_ALLOW_RUNASROOT=\"0\" && ./config.sh --url https://github.com/nestjs-mod/nestjs-mod-fullstack --token SOME_RANDOM_CHARS\n\n--------------------------------------------------------------------------------\n|        ____ _ _   _   _       _          _        _   _                      |\n|       / ___(_) |_| | | |_   _| |__      / \\   ___| |_(_) ___  _ __  ___      |\n|      | |  _| | __| |_| | | | | '_ \\    / _ \\ / __| __| |/ _ \\| '_ \\/ __|     |\n|      | |_| | | |_|  _  | |_| | |_) |  / ___ \\ (__| |_| | (_) | | | \\__ \\     |\n|       \\____|_|\\__|_| |_|\\__,_|_.__/  /_/   \\_\\___|\\__|_|\\___/|_| |_|___/     |\n|                                                                              |\n|                       Self-hosted runner registration                        |\n|                                                                              |\n--------------------------------------------------------------------------------\n\n# Authentication\n\n\n\u221a Connected to GitHub\n\n# Runner Registration\n\nEnter the name of the runner group to add this runner to: [press Enter for Default]\n\nEnter the name of runner: [press Enter for vps1724252356]\n\nThis runner will have the following labels: 'self-hosted', 'Linux', 'X64'\nEnter any additional labels (ex. label-1,label-2): [press Enter to skip]\n\n\u221a Runner successfully added\n\u221a Runner connection is good\n\n# Runner settings\n\nEnter name of work folder: [press Enter for _work]\n\n\u221a Settings Saved.\n\nroot@vps1724252356:~/actions-runner# ./run.sh\n\n\u221a Connected to GitHub\n\nCurrent runner version: '2.319.1'\n2024-08-24 10:34:46Z: Listening for Jobs\n^CExiting...\nRunner listener exit with 0 return code, stop the service, no retry needed.\nExiting runner...\nroot@vps1724252356:~/actions-runner# sudo ./svc.sh install\nCreating launch runner in /etc/systemd/system/actions.runner.nestjs-mod-nestjs-mod-fullstack.vps1724252356.service\nRun as user: root\nRun as uid: 0\ngid: 0\nCreated symlink /etc/systemd/system/multi-user.target.wants/actions.runner.nestjs-mod-nestjs-mod-fullstack.vps1724252356.service \u2192 /etc/systemd/system/actions.runner.nestjs-mod-nestjs-mod-fullstack.vps1724252356.service.\nroot@vps1724252356:~/actions-runner# sudo ./svc.sh start\n\n/etc/systemd/system/actions.runner.nestjs-mod-nestjs-mod-fullstack.vps1724252356.service\n\u25cf actions.runner.nestjs-mod-nestjs-mod-fullstack.vps1724252356.service - GitHub Actions Runner (nestjs-mod-nestjs-mod-fullstack.vps1724252356)\n     Loaded: loaded (/etc/systemd/system/actions.runner.nestjs-mod-nestjs-mod-fullstack.vps1724252356.service; enabled; vendor preset: enabled)\n     Active: active (running) since Sat 2024-08-24 13:35:43 MSK; 33ms ago\n   Main PID: 1476204 (runsvc.sh)\n      Tasks: 2 (limit: 2309)\n     Memory: 1.7M\n        CPU: 16ms\n     CGroup: /system.slice/actions.runner.nestjs-mod-nestjs-mod-fullstack.vps1724252356.service\n             \u251c\u25001476204 /bin/bash /root/actions-runner/runsvc.sh\n             \u2514\u25001476206 ./externals/node16/bin/node ./bin/RunnerService.js\n\nAug 24 13:35:43 vps1724252356 systemd[1]: Started GitHub Actions Runner (nestjs-mod-nestjs-mod-fullstack.vps1724252356).\nAug 24 13:35:43 vps1724252356 runsvc.sh[1476204]: .path=/root/.nvm/versions/node/v20.16.0/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:\u2026mes:/snap/bin\nHint: Some lines were ellipsized, use -l to show in full.\n"})}),"\n",(0,t.jsx)(n.h3,{id:"5-we-connect-to-a-dedicated-server-and-set-the-pm2-and-docker-compose-modes-and-delete-the-volume-from-the-database",children:'5. We connect to a dedicated server and set the "PM2" and "Docker Compose" modes and delete the Volume from the database'}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Commands"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd nestjs-mod-fullstack/\nnpm run docker-compose-full:prod:stop\nnpm run pm2-full:prod:stop\ndocker volume rm nestjs-mod-fullstack-postgre-sql-volume\ndocker volume rm server-postgre-sql-volume\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Console output"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"root@vps1724252356:~# cd nestjs-mod-fullstack/\nroot@vps1724252356:~/nestjs-mod-fullstack# npm run docker-compose-full:prod:stop\n\n> @nestjs-mod-fullstack/source@0.0.0 docker-compose-full:prod:stop\n> export COMPOSE_INTERACTIVE_NO_CLI=1 && docker compose -f ./.docker/docker-compose-full.yml --env-file ./.docker/docker-compose-full.env --compatibility down\n\nWARN[0000] /root/nestjs-mod-fullstack/.docker/docker-compose-full.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion\n[+] Running 6/6\n \u2714 Container nestjs-mod-fullstack-https-portal            Removed                                                                                                             10.8s\n \u2714 Container nestjs-mod-fullstack-nginx                   Removed                                                                                                              0.4s\n \u2714 Container nestjs-mod-fullstack-server                  Removed                                                                                                              0.4s\n \u2714 Container nestjs-mod-fullstack-postgre-sql-migrations  Removed                                                                                                              0.1s\n \u2714 Container nestjs-mod-fullstack-postgre-sql             Removed                                                                                                              0.4s\n \u2714 Network docker_nestjs-mod-fullstack-network            Removed                                                                                                              0.2s\nroot@vps1724252356:~/nestjs-mod-fullstack# npm run pm2-full:prod:stop\n\n> @nestjs-mod-fullstack/source@0.0.0 pm2-full:prod:stop\n> npm run docker-compose:stop-prod:server && npm run pm2:stop\n\n\n> @nestjs-mod-fullstack/source@0.0.0 docker-compose:stop-prod:server\n> export COMPOSE_INTERACTIVE_NO_CLI=1 && docker compose -f ./apps/server/docker-compose-prod.yml --env-file ./apps/server/docker-compose-prod.env down\n\nWARN[0000] /root/nestjs-mod-fullstack/apps/server/docker-compose-prod.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion\n\n> @nestjs-mod-fullstack/source@0.0.0 pm2:stop\n> ./node_modules/.bin/pm2 delete all\n\n[PM2][WARN] No process found\nroot@vps1724252356:~/nestjs-mod-fullstack# docker volume rm nestjs-mod-fullstack-postgre-sql-volume\nnestjs-mod-fullstack-postgre-sql-volume\nroot@vps1724252356:~/nestjs-mod-fullstack# docker volume rm server-postgre-sql-volume\nserver-postgre-sql-volume\n"})}),"\n",(0,t.jsx)(n.h3,{id:"6-since-the-launch-of-the-runner-consumes-resources-we-need-to-increase-the-server-capacity",children:"6. Since the launch of the runner consumes resources, we need to increase the server capacity"}),"\n",(0,t.jsx)(n.p,{children:"On the site where I bought a dedicated server, it is possible to change the tariff plan for extra money, I changed it to a slightly more expensive tariff."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"Operating system"}),": ",(0,t.jsx)(n.code,{children:"Ubuntu 22.04 x64"}),"\n",(0,t.jsx)(n.em,{children:"Access to the world"}),": ",(0,t.jsx)(n.code,{children:"100 MB/sec (shared)"}),"\n",(0,t.jsx)(n.em,{children:"RAM"}),": ",(0,t.jsx)(n.code,{children:"4GB"}),"\n",(0,t.jsx)(n.em,{children:"CPU"}),": ",(0,t.jsx)(n.code,{children:"2 vCPUs"}),"\n",(0,t.jsx)(n.em,{children:"Number of IPv4 address"}),": ",(0,t.jsx)(n.code,{children:"1"})]}),"\n",(0,t.jsx)(n.h3,{id:"7-creating-a-workflow-configuration-for-deployment-in-the-docker-compose-mode",children:'7. Creating a workflow configuration for deployment in the "Docker Compose" mode'}),"\n",(0,t.jsxs)(n.p,{children:["The created file is ",(0,t.jsx)(n.code,{children:".github/workflows/docker-compose.workflows.yml"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: 'Docker Compose'\n\non:\n  push:\n    branches: [master]\n\njobs:\n  deploy:\n    name: Deploy\n    environment: docker-compose-full\n    runs-on: [self-hosted]\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          # We must fetch at least the immediate parents so that if this is\n          # a pull request then we can checkout the head.\n          fetch-depth: 2\n\n      - name: Deploy\n        env:\n          SERVER_ROOT_DATABASE_URL: ${{ secrets.SERVER_ROOT_DATABASE_URL }}\n          SERVER_APP_DATABASE_URL: ${{ secrets.SERVER_APP_DATABASE_URL }}\n          SERVER_POSTGRE_SQL_POSTGRESQL_USERNAME: ${{ secrets.SERVER_POSTGRE_SQL_POSTGRESQL_USERNAME }}\n          SERVER_POSTGRE_SQL_POSTGRESQL_PASSWORD: ${{ secrets.SERVER_POSTGRE_SQL_POSTGRESQL_PASSWORD }}\n          SERVER_POSTGRE_SQL_POSTGRESQL_DATABASE: ${{ secrets.SERVER_POSTGRE_SQL_POSTGRESQL_DATABASE }}\n          SERVER_DOMAIN: ${{ secrets.SERVER_DOMAIN }}\n          HTTPS_PORTAL_STAGE: ${{ secrets.HTTPS_PORTAL_STAGE }}\n          COMPOSE_INTERACTIVE_NO_CLI: 1\n          NX_DAEMON: false\n          DISABLE_SERVE_STATIC: true\n        run: |\n          docker compose -f ./.docker/docker-compose-full.yml --compatibility down || echo 'docker-compose-full not started'\n          npm i\n          npx playwright install\n          cp -r ./example.env ./.env\n          npm run generate\n          npm run build -- -c production\n          npm run docker:build:server:latest\n          docker compose -f ./.docker/docker-compose-full.yml --compatibility up -d\n\n      - name: E2E-tests\n        env:\n          BASE_URL: https://${{ secrets.SERVER_DOMAIN }}\n          NX_DAEMON: false\n          NODE_TLS_REJECT_UNAUTHORIZED: 0\n        run: |\n          npm run wait-on -- --log https://${{ secrets.SERVER_DOMAIN }}/api/health --log https://${{ secrets.SERVER_DOMAIN }}\n          npm run test:e2e\n"})}),"\n",(0,t.jsx)(n.h3,{id:"8-since-the-server-has-become-a-little-slower-it-is-necessary-to-reconfigure-the-settings-for-running-e2e-tests-for-the-frontend-application-and-the-tests-themselves",children:"8. Since the server has become a little slower, it is necessary to reconfigure the settings for running E2E tests for the frontend application and the tests themselves"}),"\n",(0,t.jsxs)(n.p,{children:["Updated file ",(0,t.jsx)(n.code,{children:"apps/client-e2e/playwright.config.ts"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { nxE2EPreset } from '@nx/playwright/preset';\nimport { defineConfig, devices } from '@playwright/test';\n\n// For CI, you may want to set BASE_URL to the deployed application.\nconst baseURL = process.env['BASE_URL'] || 'http://localhost:4200';\n\n/**\n * Read environment variables from file.\n * https://github.com/motdotla/dotenv\n */\n// require('dotenv').config();\n\n/**\n * See https://playwright.dev/docs/test-configuration.\n */\nexport default defineConfig({\n  timeout: 60 * 1000,\n  ...nxE2EPreset(__filename, { testDir: './src' }),\n  /* Shared settings for all the projects below. See https://playwright.dev/docs/api/class-testoptions. */\n  use: {\n    baseURL,\n    /* Collect trace when retrying the failed test. See https://playwright.dev/docs/trace-viewer */\n    trace: 'on-first-retry',\n    ignoreHTTPSErrors: true,\n  },\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n  ],\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Updated file ",(0,t.jsx)(n.code,{children:"apps/client-e2e/src/example.spec.ts"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { test, expect } from '@playwright/test';\n\ntest('has title', async ({ page }) => {\n  await page.goto('/', {\n    timeout: 5000, // <- updated\n  });\n\n  // Expect h1 to contain a substring.\n  expect(await page.locator('h1').innerText()).toContain('Welcome');\n});\n\ntest('has serverMessage', async ({ page }) => {\n  await page.goto('/', {\n    timeout: 5000, // <- updated\n  });\n\n  // Expect h1 to contain a substring.\n  expect(await page.locator('#serverMessage').innerText()).toContain('Hello API');\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"9-commit-the-updates-to-the-repository-and-see-the-result-of-the-work-in-github",children:"9. Commit the updates to the repository and see the result of the work in Github"}),"\n",(0,t.jsxs)(n.p,{children:["For the current project, the workflow of the runners can be seen here: ",(0,t.jsx)(n.a,{href:"https://github.com/nestjs-mod/nestjs-mod-fullstack/actions",children:"https://github.com/nestjs-mod/nestjs-mod-fullstack/actions"})]}),"\n",(0,t.jsxs)(n.p,{children:["The current runner workflow is: ",(0,t.jsx)(n.a,{href:"https://github.com/nestjs-mod/nestjs-mod-fullstack/actions/runs/10563577662/job/29264098375",children:"https://github.com/nestjs-mod/nestjs-mod-fullstack/actions/runs/10563577662/job/29264098375"}),"\nCurrent time of full deployment: ",(0,t.jsx)(n.code,{children:"10m 8s"}),"\nCurrent run of all E2E tests: ",(0,t.jsx)(n.code,{children:"50s"})]}),"\n",(0,t.jsx)(n.p,{children:"In the next post, I will speed up the deployment by using public GitHub runners and creating intermediate images..."}),"\n",(0,t.jsx)(n.h3,{id:"links",children:"Links"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://nestjs.com",children:"https://nestjs.com"})," - the official website of the framework"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://nestjs-mod.com",children:"https://nestjs-mod.com"})," - the official website of additional utilities"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://fullstack.nestjs-mod.com",children:"https://fullstack.nestjs-mod.com"})," - website from the post"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/nestjs-mod/nestjs-mod-fullstack",children:"https://github.com/nestjs-mod/nestjs-mod-fullstack"})," - the project from the post"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/nestjs-mod/nestjs-mod-fullstack/compare/6dd40bb74621315c79e24f86b3856e58e159c73f..1b8f3f0a96e87f71408422518f63d424b3db7f28",children:"https://github.com/nestjs-mod/nestjs-mod-fullstack/compare/6dd40bb74621315c79e24f86b3856e58e159c73f..1b8f3f0a96e87f71408422518f63d424b3db7f28"})," - current changes"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"#docker #github #nestjsmod #fullstack\n#2024-08-26"})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var t=s(6540);const o={},r=t.createContext(o);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);