"use strict";(self.webpackChunknestjs_mod_com=self.webpackChunknestjs_mod_com||[]).push([[5541],{6276:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>o,toc:()=>l});var s=r(4848),t=r(8453);const c={},a="\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u0430\u0439\u0442\u0443 \u043d\u0430 NestJS \u0438 Angular \u043f\u043e \u0434\u043e\u043c\u0435\u043d\u043d\u043e\u043c\u0443 \u0438\u043c\u0435\u043d\u0438 c SSL - \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u043c \u0432 Kubernetes \u0447\u0435\u0440\u0435\u0437 Ingress",o={id:"ru-posts/fullstack/2024-09-15",title:"\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u0430\u0439\u0442\u0443 \u043d\u0430 NestJS \u0438 Angular \u043f\u043e \u0434\u043e\u043c\u0435\u043d\u043d\u043e\u043c\u0443 \u0438\u043c\u0435\u043d\u0438 c SSL - \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u043c \u0432 Kubernetes \u0447\u0435\u0440\u0435\u0437 Ingress",description:"\u0412 Kubernetes \u043e\u0447\u0435\u043d\u044c \u043b\u0435\u0433\u043a\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 SSL, \u044d\u0442\u043e \u043d\u0430\u0432\u0435\u0440\u043d\u043e\u0435 \u043e\u0434\u043d\u0430 \u0438\u0437 \u0433\u043b\u0430\u0432\u043d\u044b\u0445 \u043f\u0440\u0438\u0447\u0438\u043d \u043f\u043e\u0447\u0435\u043c\u0443 \u044f \u0438 \u043d\u0430\u0447\u0430\u043b \u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f, \u0432 \u044d\u0442\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u044f \u043e\u043f\u0438\u0448\u0443 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439 \u0435\u0433\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f.",source:"@site/docs/ru-posts/fullstack/2024-09-15.md",sourceDirName:"ru-posts/fullstack",slug:"/ru-posts/fullstack/2024-09-15",permalink:"/docs/ru-posts/fullstack/2024-09-15",draft:!1,unlisted:!1,editUrl:"https://github.com/nestjs-mod/nestjs-mod.com/blob/master/docs/ru-posts/fullstack/2024-09-15.md",tags:[],version:"current",frontMatter:{},sidebar:"ruPostsSidebar",previous:{title:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Kubernetes \u0447\u0435\u0440\u0435\u0437 MicroK8s \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0434\u0435\u043f\u043b\u043e\u044f NestJS \u0438 Angular \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439",permalink:"/docs/ru-posts/fullstack/2024-09-13"},next:{title:"\u0421\u0435\u043c\u0430\u043d\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0432\u0435\u0440\u0441\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 NestJS \u0438 Angular \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u0432 NX-\u043c\u043e\u043d\u043e\u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438",permalink:"/docs/ru-posts/fullstack/2024-09-16"}},i={},l=[{value:"1. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432 \u043d\u0430 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440",id:"1-\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430-\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430-\u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432-\u043d\u0430-\u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439-\u0441\u0435\u0440\u0432\u0435\u0440",level:3},{value:"2. \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0432 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438 \u0444\u0430\u0439\u043b \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432",id:"2-\u0441\u043e\u0437\u0434\u0430\u0435\u043c-\u0432-\u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438-\u0444\u0430\u0439\u043b-\u0441-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438-\u0440\u0435\u0441\u0443\u0440\u0441\u0430-\u0434\u043b\u044f-\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f-\u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432",level:3},{value:"3. \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0432 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438 \u0444\u0430\u0439\u043b \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 Kubernetes \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0437\u0430 \u043f\u0440\u043e\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u0432 \u043d\u0430\u0448\u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u044b",id:"3-\u0441\u043e\u0437\u0434\u0430\u0435\u043c-\u0432-\u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438-\u0444\u0430\u0439\u043b-\u0441-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438-\u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438-kubernetes-\u043a\u043e\u0442\u043e\u0440\u0430\u044f-\u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442-\u0437\u0430-\u043f\u0440\u043e\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435-\u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e-\u0442\u0440\u0430\u0444\u0438\u043a\u0430-\u0432-\u043d\u0430\u0448\u0438-\u0441\u0435\u0440\u0432\u0438\u0441\u044b",level:3},{value:"4. \u041d\u0435\u043c\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u044f\u0435\u043c CI/CD-\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u0434\u0435\u043f\u043b\u043e\u044f \u0432 Kubernetes, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043b\u0438\u0448\u043d\u0438\u0439 \u043f\u0435\u0440\u0435\u0434\u0435\u043f\u043b\u043e\u0439 \u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b",id:"4-\u043d\u0435\u043c\u043d\u043e\u0433\u043e-\u043c\u0435\u043d\u044f\u0435\u043c-cicd-\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e-\u0434\u043b\u044f-\u0434\u0435\u043f\u043b\u043e\u044f-\u0432-kubernetes-\u0447\u0442\u043e\u0431\u044b-\u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c-\u043b\u0438\u0448\u043d\u0438\u0439-\u043f\u0435\u0440\u0435\u0434\u0435\u043f\u043b\u043e\u0439-\u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b",level:3},{value:"5. \u041c\u0435\u043d\u044f\u0435\u043c \u0430\u0434\u0440\u0435\u0441 \u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430 \u0432 &quot;Docker Compose&quot; - \u0444\u0430\u0439\u043b\u0435 \u0434\u043b\u044f E2E \u0442\u0435\u0441\u0442\u043e\u0432",id:"5-\u043c\u0435\u043d\u044f\u0435\u043c-\u0430\u0434\u0440\u0435\u0441-\u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u043e\u0433\u043e-\u0441\u0430\u0439\u0442\u0430-\u0432-docker-compose---\u0444\u0430\u0439\u043b\u0435-\u0434\u043b\u044f-e2e-\u0442\u0435\u0441\u0442\u043e\u0432",level:3},{value:"6. \u041a\u043e\u043c\u043c\u0438\u0442\u0438\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438 \u0436\u0434\u0435\u043c \u043a\u043e\u0433\u0434\u0430 CI/CD \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438 \u0440\u0443\u043a\u0430\u043c\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0440\u0430\u0431\u043e\u0442\u0443 \u0441\u0430\u0439\u0442\u0430",id:"6-\u043a\u043e\u043c\u043c\u0438\u0442\u0438\u043c-\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f-\u0438-\u0436\u0434\u0435\u043c-\u043a\u043e\u0433\u0434\u0430-cicd-\u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442-\u0443\u0441\u043f\u0435\u0448\u043d\u043e-\u0438-\u0440\u0443\u043a\u0430\u043c\u0438-\u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c-\u0440\u0430\u0431\u043e\u0442\u0443-\u0441\u0430\u0439\u0442\u0430",level:3},{value:"7. \u0423\u0434\u0430\u043b\u044f\u0435\u043c \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u043b\u0438 \u0432 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c \u043f\u043e\u0441\u0442\u0435",id:"7-\u0443\u0434\u0430\u043b\u044f\u0435\u043c-\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439-\u0441\u0435\u0440\u0432\u0438\u0441-\u043a\u043e\u0442\u043e\u0440\u044b\u0439-\u0441\u043e\u0437\u0434\u0430\u0432\u0430\u043b\u0438-\u0432-\u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c-\u043f\u043e\u0441\u0442\u0435",level:3},{value:"8. \u041a\u043e\u043c\u043c\u0438\u0442\u0438\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438 \u0436\u0434\u0435\u043c \u043a\u043e\u0433\u0434\u0430 CI/CD \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438 \u0440\u0443\u043a\u0430\u043c\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0447\u0442\u043e \u0441\u0430\u0439\u0442 http://fullstack.nestjs-mod.com:30222 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442",id:"8-\u043a\u043e\u043c\u043c\u0438\u0442\u0438\u043c-\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f-\u0438-\u0436\u0434\u0435\u043c-\u043a\u043e\u0433\u0434\u0430-cicd-\u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442-\u0443\u0441\u043f\u0435\u0448\u043d\u043e-\u0438-\u0440\u0443\u043a\u0430\u043c\u0438-\u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c-\u0447\u0442\u043e-\u0441\u0430\u0439\u0442-httpfullstacknestjs-modcom30222-\u0431\u043e\u043b\u044c\u0448\u0435-\u043d\u0435-\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442",level:3},{value:"\u0417\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435",id:"\u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435",level:3},{value:"\u041f\u043b\u0430\u043d\u044b",id:"\u043f\u043b\u0430\u043d\u044b",level:3},{value:"\u0421\u0441\u044b\u043b\u043a\u0438",id:"\u0441\u0441\u044b\u043b\u043a\u0438",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"\u0434\u043e\u0441\u0442\u0443\u043f-\u043a-\u0441\u0430\u0439\u0442\u0443-\u043d\u0430-nestjs-\u0438-angular-\u043f\u043e-\u0434\u043e\u043c\u0435\u043d\u043d\u043e\u043c\u0443-\u0438\u043c\u0435\u043d\u0438-c-ssl---\u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u043c-\u0432-kubernetes-\u0447\u0435\u0440\u0435\u0437-ingress",children:"\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u0430\u0439\u0442\u0443 \u043d\u0430 NestJS \u0438 Angular \u043f\u043e \u0434\u043e\u043c\u0435\u043d\u043d\u043e\u043c\u0443 \u0438\u043c\u0435\u043d\u0438 c SSL - \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u043c \u0432 Kubernetes \u0447\u0435\u0440\u0435\u0437 Ingress"}),"\n",(0,s.jsx)(n.p,{children:"\u0412 Kubernetes \u043e\u0447\u0435\u043d\u044c \u043b\u0435\u0433\u043a\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 SSL, \u044d\u0442\u043e \u043d\u0430\u0432\u0435\u0440\u043d\u043e\u0435 \u043e\u0434\u043d\u0430 \u0438\u0437 \u0433\u043b\u0430\u0432\u043d\u044b\u0445 \u043f\u0440\u0438\u0447\u0438\u043d \u043f\u043e\u0447\u0435\u043c\u0443 \u044f \u0438 \u043d\u0430\u0447\u0430\u043b \u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f, \u0432 \u044d\u0442\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u044f \u043e\u043f\u0438\u0448\u0443 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439 \u0435\u0433\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f."}),"\n",(0,s.jsx)(n.h3,{id:"1-\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430-\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430-\u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432-\u043d\u0430-\u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439-\u0441\u0435\u0440\u0432\u0435\u0440",children:"1. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432 \u043d\u0430 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440"}),"\n",(0,s.jsx)(n.p,{children:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u0441\u044f \u043a \u043d\u0430\u0448\u0435\u043c\u0443 \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u043f\u043e SSH \u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u043c cert-manager \u043f\u043b\u0430\u0433\u0438\u043d \u0443 MicroK8s."}),"\n",(0,s.jsx)(n.p,{children:"\u041f\u043b\u0430\u0433\u0438\u043d cert-manager \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u043c \u0432\u044b\u043f\u0443\u0441\u043a\u0430 \u0438 \u043f\u0440\u043e\u0434\u043b\u0435\u043d\u0438\u044f SSL - \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"\u041a\u043e\u043c\u0430\u043d\u0434\u044b"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ssh root@194.226.49.162\nmicrok8s enable cert-manager\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"\u0412\u044b\u0432\u043e\u0434 \u043a\u043e\u043d\u0441\u043e\u043b\u0438"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@vps1724252356:~# microk8s enable cert-manager\nInfer repository core for addon cert-manager\nEnable DNS addon\nInfer repository core for addon dns\nAddon core/dns is already enabled\nEnabling cert-manager\nnamespace/cert-manager created\ncustomresourcedefinition.apiextensions.k8s.io/certificaterequests.cert-manager.io created\ncustomresourcedefinition.apiextensions.k8s.io/certificates.cert-manager.io created\ncustomresourcedefinition.apiextensions.k8s.io/challenges.acme.cert-manager.io created\ncustomresourcedefinition.apiextensions.k8s.io/clusterissuers.cert-manager.io created\ncustomresourcedefinition.apiextensions.k8s.io/issuers.cert-manager.io created\ncustomresourcedefinition.apiextensions.k8s.io/orders.acme.cert-manager.io created\nserviceaccount/cert-manager-cainjector created\nserviceaccount/cert-manager created\nserviceaccount/cert-manager-webhook created\nconfigmap/cert-manager-webhook created\nclusterrole.rbac.authorization.k8s.io/cert-manager-cainjector created\nclusterrole.rbac.authorization.k8s.io/cert-manager-controller-issuers created\nclusterrole.rbac.authorization.k8s.io/cert-manager-controller-clusterissuers created\nclusterrole.rbac.authorization.k8s.io/cert-manager-controller-certificates created\nclusterrole.rbac.authorization.k8s.io/cert-manager-controller-orders created\nclusterrole.rbac.authorization.k8s.io/cert-manager-controller-challenges created\nclusterrole.rbac.authorization.k8s.io/cert-manager-controller-ingress-shim created\nclusterrole.rbac.authorization.k8s.io/cert-manager-view created\nclusterrole.rbac.authorization.k8s.io/cert-manager-edit created\nclusterrole.rbac.authorization.k8s.io/cert-manager-controller-approve:cert-manager-io created\nclusterrole.rbac.authorization.k8s.io/cert-manager-controller-certificatesigningrequests created\nclusterrole.rbac.authorization.k8s.io/cert-manager-webhook:subjectaccessreviews created\nclusterrolebinding.rbac.authorization.k8s.io/cert-manager-cainjector created\nclusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-issuers created\nclusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-clusterissuers created\nclusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-certificates created\nclusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-orders created\nclusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-challenges created\nclusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-ingress-shim created\nclusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-approve:cert-manager-io created\nclusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-certificatesigningrequests created\nclusterrolebinding.rbac.authorization.k8s.io/cert-manager-webhook:subjectaccessreviews created\nrole.rbac.authorization.k8s.io/cert-manager-cainjector:leaderelection created\nrole.rbac.authorization.k8s.io/cert-manager:leaderelection created\nrole.rbac.authorization.k8s.io/cert-manager-webhook:dynamic-serving created\nrolebinding.rbac.authorization.k8s.io/cert-manager-cainjector:leaderelection created\nrolebinding.rbac.authorization.k8s.io/cert-manager:leaderelection created\nrolebinding.rbac.authorization.k8s.io/cert-manager-webhook:dynamic-serving created\nservice/cert-manager created\nservice/cert-manager-webhook created\ndeployment.apps/cert-manager-cainjector created\ndeployment.apps/cert-manager created\ndeployment.apps/cert-manager-webhook created\nmutatingwebhookconfiguration.admissionregistration.k8s.io/cert-manager-webhook created\nvalidatingwebhookconfiguration.admissionregistration.k8s.io/cert-manager-webhook created\nWaiting for cert-manager to be ready.\n..ready\nEnabled cert-manager\n\n===========================\n\nCert-manager is installed. As a next step, try creating a ClusterIssuer\nfor Let's Encrypt by creating the following resource:\n\n$ microk8s kubectl apply -f - <<EOF\n---\napiVersion: cert-manager.io/v1\nkind: ClusterIssuer\nmetadata:\n  name: letsencrypt\nspec:\n  acme:\n    # You must replace this email address with your own.\n    # Let's Encrypt will use this to contact you about expiring\n    # certificates, and issues related to your account.\n    email: me@example.com\n    server: https://acme-v02.api.letsencrypt.org/directory\n    privateKeySecretRef:\n      # Secret resource that will be used to store the account's private key.\n      name: letsencrypt-account-key\n    # Add a single challenge solver, HTTP01 using nginx\n    solvers:\n    - http01:\n        ingress:\n          class: public\nEOF\n\nThen, you can create an ingress to expose 'my-service:80' on 'https://my-service.example.com' with:\n\n$ microk8s enable ingress\n$ microk8s kubectl create ingress my-ingress \\\n    --annotation cert-manager.io/cluster-issuer=letsencrypt \\\n    --rule 'my-service.example.com/*=my-service:80,tls=my-service-tls'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-\u0441\u043e\u0437\u0434\u0430\u0435\u043c-\u0432-\u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438-\u0444\u0430\u0439\u043b-\u0441-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438-\u0440\u0435\u0441\u0443\u0440\u0441\u0430-\u0434\u043b\u044f-\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f-\u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432",children:"2. \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0432 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438 \u0444\u0430\u0439\u043b \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432"}),"\n",(0,s.jsx)(n.p,{children:"\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0435 \u0438 \u043f\u043b\u0430\u0442\u043d\u044b\u0435 \u0441\u0430\u0439\u0442\u044b \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b\u0434\u0430\u044e\u0442 SSL - \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b, \u0438 \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0432 cert-manager \u043a\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0438 \u0443 \u043a\u043e\u0433\u043e \u0431\u0440\u0430\u0442\u044c \u044d\u0442\u0438 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b."}),"\n",(0,s.jsxs)(n.p,{children:["\u041b\u0438\u0447\u043d\u043e \u044f \u0441\u0430\u043c \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u043b \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432 \u0441 ",(0,s.jsx)(n.a,{href:"https://letsencrypt.org",children:"https://letsencrypt.org"})," \u0438 ",(0,s.jsx)(n.a,{href:"https://www.cloudflare.com",children:"https://www.cloudflare.com"}),", \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435 \u0431\u0443\u0434\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b \u043e\u0442 ",(0,s.jsx)(n.code,{children:"Let's Encrypt"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"\u0414\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432 \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0435\u0441\u0443\u0440\u0441 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432."}),"\n",(0,s.jsxs)(n.p,{children:["\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0444\u0430\u0439\u043b ",(0,s.jsx)(n.code,{children:".kubernetes/templates/node/8.issuer.yaml"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: cert-manager.io/v1\nkind: ClusterIssuer\nmetadata:\n  name: letsencrypt-prod\n  namespace: cert-manager\nspec:\n  acme:\n    email: nestjs-mod@site15.ru\n    server: https://acme-v02.api.letsencrypt.org/directory\n    privateKeySecretRef:\n      name: letsencrypt-prod\n    solvers:\n      - http01:\n          ingress:\n            class: public\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-\u0441\u043e\u0437\u0434\u0430\u0435\u043c-\u0432-\u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438-\u0444\u0430\u0439\u043b-\u0441-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438-\u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438-kubernetes-\u043a\u043e\u0442\u043e\u0440\u0430\u044f-\u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442-\u0437\u0430-\u043f\u0440\u043e\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435-\u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e-\u0442\u0440\u0430\u0444\u0438\u043a\u0430-\u0432-\u043d\u0430\u0448\u0438-\u0441\u0435\u0440\u0432\u0438\u0441\u044b",children:"3. \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0432 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438 \u0444\u0430\u0439\u043b \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 Kubernetes \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0437\u0430 \u043f\u0440\u043e\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u0432 \u043d\u0430\u0448\u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u044b"}),"\n",(0,s.jsx)(n.p,{children:"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u044d\u0442\u0430 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 Nginx, \u043d\u0443 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0438 Traefik, \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f Nginx, \u0442\u0430\u043a \u043a\u0430\u043a \u043e\u043d \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e."}),"\n",(0,s.jsxs)(n.p,{children:["\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0444\u0430\u0439\u043b ",(0,s.jsx)(n.code,{children:".kubernetes/templates/client/5.ingress.yaml"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  namespace: '%NAMESPACE%'\n  name: %NAMESPACE%-client-ingress\n  annotations:\n    cert-manager.io/cluster-issuer: letsencrypt-prod\n    nginx.ingress.kubernetes.io/proxy-connect-timeout: '3600'\n    nginx.ingress.kubernetes.io/proxy-read-timeout: '3600'\n    nginx.ingress.kubernetes.io/proxy-send-timeout: '3600'\nspec:\n  rules:\n    - host: %SERVER_DOMAIN%\n      http:\n        paths:\n          - path: /\n            pathType: Prefix\n            backend:\n              service:\n                name: %NAMESPACE%-client\n                port:\n                  number: %NGINX_PORT%\n  tls:\n    - hosts:\n        - %SERVER_DOMAIN%\n      secretName: %NAMESPACE%-client-tls\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-\u043d\u0435\u043c\u043d\u043e\u0433\u043e-\u043c\u0435\u043d\u044f\u0435\u043c-cicd-\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e-\u0434\u043b\u044f-\u0434\u0435\u043f\u043b\u043e\u044f-\u0432-kubernetes-\u0447\u0442\u043e\u0431\u044b-\u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c-\u043b\u0438\u0448\u043d\u0438\u0439-\u043f\u0435\u0440\u0435\u0434\u0435\u043f\u043b\u043e\u0439-\u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b",children:"4. \u041d\u0435\u043c\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u044f\u0435\u043c CI/CD-\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u0434\u0435\u043f\u043b\u043e\u044f \u0432 Kubernetes, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043b\u0438\u0448\u043d\u0438\u0439 \u043f\u0435\u0440\u0435\u0434\u0435\u043f\u043b\u043e\u0439 \u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b"}),"\n",(0,s.jsx)(n.p,{children:"\u041f\u0430\u0439\u043f\u043b\u0430\u0439\u043d \u0434\u0435\u043f\u043b\u043e\u044f \u043c\u043e\u0436\u043d\u043e \u043f\u043e \u0440\u0430\u0437\u043d\u043e\u043c\u0443 \u0440\u0430\u0437\u0431\u0438\u0432\u0430\u0442\u044c, \u043a\u043e\u043c\u0443 \u043a\u0430\u043a \u0443\u0434\u043e\u0431\u043d\u043e \u0438 \u043a\u0430\u043a \u043d\u0430\u0434\u043e, \u043d\u043e \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043f\u043e\u0441\u0442\u0435 \u044f \u043f\u0440\u043e\u0441\u0442\u043e \u0437\u0430\u043f\u0440\u0435\u0449\u0443 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a \u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0435\u0441\u043b\u0438 \u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0435 \u0431\u044b\u043b\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430."}),"\n",(0,s.jsxs)(n.p,{children:["\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0437\u0430\u0434\u0430\u0447\u0438 \u043f\u043e \u0434\u0435\u043f\u043b\u043e\u044e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f ",(0,s.jsx)(n.code,{children:".github/workflows/kubernetes.yml"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# ...\njobs:\n  # ...\n  deploy:\n    environment: kubernetes\n    needs: [check-server-image, build-and-push-migrations-image, build-and-push-server-image, build-and-push-nginx-image, build-and-push-e2e-tests-image]\n    runs-on: [self-hosted]\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 2\n\n      - name: Deploy infrastructure\n        if: ${{ needs.check-server-image.outputs.result != 'success' || contains(github.event.head_commit.message, '[skip cache]') || contains(github.event.head_commit.message, '[skip infrastructure]') }}\n        env:\n          SERVER_APP_DATABASE_NAME: ${{ secrets.SERVER_APP_DATABASE_NAME }}\n          SERVER_APP_DATABASE_PASSWORD: ${{ secrets.SERVER_APP_DATABASE_PASSWORD }}\n          SERVER_APP_DATABASE_USERNAME: ${{ secrets.SERVER_APP_DATABASE_USERNAME }}\n          SERVER_POSTGRE_SQL_POSTGRESQL_DATABASE: ${{ secrets.SERVER_POSTGRE_SQL_POSTGRESQL_DATABASE }}\n          SERVER_POSTGRE_SQL_POSTGRESQL_PASSWORD: ${{ secrets.SERVER_POSTGRE_SQL_POSTGRESQL_PASSWORD }}\n          SERVER_POSTGRE_SQL_POSTGRESQL_USERNAME: ${{ secrets.SERVER_POSTGRE_SQL_POSTGRESQL_USERNAME }}\n        run: |\n          rm -rf ./.kubernetes/generated\n          . .kubernetes/set-env.sh && npx -y rucken copy-paste --find=templates --replace=generated --replace-plural=generated --path=./.kubernetes/templates --replace-envs=true\n          docker compose -f ./.kubernetes/generated/docker-compose-infra.yml --compatibility down || echo 'docker-compose-infra not started'\n          docker compose -f ./.kubernetes/generated/docker-compose-infra.yml --compatibility up -d\n\n      - name: Deploy applications\n        env:\n          DOCKER_SERVER: ${{ env.REGISTRY }}\n          DOCKER_USERNAME: ${{ github.actor }}\n          DOCKER_PASSWORD: ${{ secrets.GITHUB_TOKEN }}\n          SERVER_APP_DATABASE_NAME: ${{ secrets.SERVER_APP_DATABASE_NAME }}\n          SERVER_APP_DATABASE_PASSWORD: ${{ secrets.SERVER_APP_DATABASE_PASSWORD }}\n          SERVER_APP_DATABASE_USERNAME: ${{ secrets.SERVER_APP_DATABASE_USERNAME }}\n          SERVER_DOMAIN: ${{ secrets.SERVER_DOMAIN }}\n        run: |\n          rm -rf ./.kubernetes/generated\n          . .kubernetes/set-env.sh && npx -y rucken copy-paste --find=templates --replace=generated --replace-plural=generated --path=./.kubernetes/templates --replace-envs=true\n          chmod +x .kubernetes/generated/install.sh\n          .kubernetes/generated/install.sh > /dev/null 2>&1 &\n\n      - name: Run E2E-tests\n        env:\n          SERVER_DOMAIN: ${{ secrets.SERVER_DOMAIN }}\n        run: |\n          rm -rf ./.kubernetes/generated\n          . .kubernetes/set-env.sh && npx -y rucken copy-paste --find=templates --replace=generated --replace-plural=generated --path=./.kubernetes/templates --replace-envs=true\n          docker compose -f ./.kubernetes/generated/docker-compose-e2e-tests.yml --compatibility up\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-\u043c\u0435\u043d\u044f\u0435\u043c-\u0430\u0434\u0440\u0435\u0441-\u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u043e\u0433\u043e-\u0441\u0430\u0439\u0442\u0430-\u0432-docker-compose---\u0444\u0430\u0439\u043b\u0435-\u0434\u043b\u044f-e2e-\u0442\u0435\u0441\u0442\u043e\u0432",children:'5. \u041c\u0435\u043d\u044f\u0435\u043c \u0430\u0434\u0440\u0435\u0441 \u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430 \u0432 "Docker Compose" - \u0444\u0430\u0439\u043b\u0435 \u0434\u043b\u044f E2E \u0442\u0435\u0441\u0442\u043e\u0432'}),"\n",(0,s.jsx)(n.p,{children:"\u0422\u0430\u043a \u043a\u0430\u043a \u0442\u0435\u043f\u0435\u0440\u044c \u043c\u044b \u0438\u043c\u0435\u0435\u043c \u0434\u043e\u043c\u0435\u043d \u0441 SSL - \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u043c, \u043d\u0430\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0440\u0442 \u0441 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c \u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434 Nginx \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 E2E - \u0442\u0435\u0441\u0442\u043e\u0432."}),"\n",(0,s.jsxs)(n.p,{children:["\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b ",(0,s.jsx)(n.code,{children:".kubernetes/templates/docker-compose-e2e-tests.yml"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"version: '3'\nnetworks:\n  nestjs-mod-fullstack-network:\n    driver: 'bridge'\nservices:\n  nestjs-mod-fullstack-e2e-tests:\n    image: 'ghcr.io/nestjs-mod/nestjs-mod-fullstack-e2e-tests:%ROOT_VERSION%'\n    container_name: 'nestjs-mod-fullstack-e2e-tests'\n    networks:\n      - 'nestjs-mod-fullstack-network'\n    environment:\n      BASE_URL: 'https://%SERVER_DOMAIN%'\n    working_dir: '/usr/src/app'\n    volumes:\n      - './../../apps:/usr/src/app/apps'\n      - './../../libs:/usr/src/app/libs'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"6-\u043a\u043e\u043c\u043c\u0438\u0442\u0438\u043c-\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f-\u0438-\u0436\u0434\u0435\u043c-\u043a\u043e\u0433\u0434\u0430-cicd-\u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442-\u0443\u0441\u043f\u0435\u0448\u043d\u043e-\u0438-\u0440\u0443\u043a\u0430\u043c\u0438-\u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c-\u0440\u0430\u0431\u043e\u0442\u0443-\u0441\u0430\u0439\u0442\u0430",children:"6. \u041a\u043e\u043c\u043c\u0438\u0442\u0438\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438 \u0436\u0434\u0435\u043c \u043a\u043e\u0433\u0434\u0430 CI/CD \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438 \u0440\u0443\u043a\u0430\u043c\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0440\u0430\u0431\u043e\u0442\u0443 \u0441\u0430\u0439\u0442\u0430"}),"\n",(0,s.jsxs)(n.p,{children:["\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0440\u0430\u0431\u043e\u0442\u044b CI/CD: ",(0,s.jsx)(n.a,{href:"https://github.com/nestjs-mod/nestjs-mod-fullstack/actions/runs/10877250887",children:"https://github.com/nestjs-mod/nestjs-mod-fullstack/actions/runs/10877250887"}),"\n\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u0430\u0439\u0442: ",(0,s.jsx)(n.a,{href:"https://fullstack.nestjs-mod.com",children:"https://fullstack.nestjs-mod.com"})]}),"\n",(0,s.jsx)(n.h3,{id:"7-\u0443\u0434\u0430\u043b\u044f\u0435\u043c-\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439-\u0441\u0435\u0440\u0432\u0438\u0441-\u043a\u043e\u0442\u043e\u0440\u044b\u0439-\u0441\u043e\u0437\u0434\u0430\u0432\u0430\u043b\u0438-\u0432-\u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c-\u043f\u043e\u0441\u0442\u0435",children:"7. \u0423\u0434\u0430\u043b\u044f\u0435\u043c \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u043b\u0438 \u0432 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c \u043f\u043e\u0441\u0442\u0435"}),"\n",(0,s.jsx)(n.p,{children:"\u0422\u0435\u043f\u0435\u0440\u044c \u0434\u0435\u043f\u043b\u043e\u0439 \u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u0439\u0442\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 Ingress \u0438 \u0437\u043d\u0430\u0447\u0438\u0442 \u0441\u0430\u0439\u0442 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0439 \u0432 \u0432\u0438\u0434\u0435 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0438\u0441\u0430 \u0447\u0435\u0440\u0435\u0437 NodePort \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0430\u043c \u043d\u0435 \u043d\u0443\u0436\u0435\u043d \u0438 \u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c."}),"\n",(0,s.jsxs)(n.p,{children:["\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0432\u0448\u0438\u0441\u044c \u043a \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u043c\u0443 \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u043f\u043e ssh \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 ",(0,s.jsx)(n.code,{children:"sudo microk8s kubectl delete service master-client-global --namespace master"}),", \u043d\u043e \u0436\u0435\u043b\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0441\u0435\u0433\u0434\u0430 \u0434\u043e\u043d\u043e\u0441\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0447\u0435\u0440\u0435\u0437 git - \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439, \u0442\u0430\u043a \u043a\u0430\u043a \u0443 \u043d\u0430\u0441 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0442\u0435\u043d\u0434\u043e\u0432 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0442\u0430\u043a\u0436\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0435\u0449\u0435 \u0440\u0430\u0437 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u044d\u0442\u0443 \u043a\u043e\u043c\u0430\u043d\u0434\u0443."]}),"\n",(0,s.jsxs)(n.p,{children:["\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043c\u044b \u0434\u043e\u043d\u0435\u0441\u0435\u043c \u0447\u0435\u0440\u0435\u0437 git, \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0443\u0434\u0430\u043b\u0438\u043c \u0444\u0430\u0439\u043b ",(0,s.jsx)(n.code,{children:".kubernetes/templates/client/4.global-service.yaml"})," \u0438 \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0432 \u0441\u043a\u0440\u0438\u043f\u0442 \u0438\u043d\u0441\u0442\u0430\u043b\u044f\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439."]}),"\n",(0,s.jsxs)(n.p,{children:["\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c \u0444\u0430\u0439\u043b ",(0,s.jsx)(n.code,{children:".kubernetes/templates/install.sh"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"#!/bin/bash\nset -e\n\n# docker regcred for pull docker images\nsudo microk8s kubectl delete secret docker-regcred || echo 'not need delete secret docker-regcred'\nsudo microk8s kubectl create secret docker-registry docker-regcred --docker-server=%DOCKER_SERVER% --docker-username=%DOCKER_USERNAME% --docker-password=%DOCKER_PASSWORD% --docker-email=docker-regcred\n\n# namespace and common config\nsudo microk8s kubectl apply -f .kubernetes/generated/node\nsudo microk8s kubectl get secret docker-regcred -n default -o yaml || sed s/\"namespace: default\"/\"namespace: %NAMESPACE%\"/ || microk8s kubectl apply -n %NAMESPACE% -f - || echo 'not need update docker-regcred'\n\n# server\nsudo microk8s kubectl apply -f .kubernetes/generated/server\n\n# client\nsudo microk8s kubectl apply -f .kubernetes/generated/client\n\n# depricated\nsudo microk8s kubectl delete service master-client-global --namespace master || echo 'not need delete master-client-global'\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"8-\u043a\u043e\u043c\u043c\u0438\u0442\u0438\u043c-\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f-\u0438-\u0436\u0434\u0435\u043c-\u043a\u043e\u0433\u0434\u0430-cicd-\u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442-\u0443\u0441\u043f\u0435\u0448\u043d\u043e-\u0438-\u0440\u0443\u043a\u0430\u043c\u0438-\u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c-\u0447\u0442\u043e-\u0441\u0430\u0439\u0442-httpfullstacknestjs-modcom30222-\u0431\u043e\u043b\u044c\u0448\u0435-\u043d\u0435-\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442",children:["8. \u041a\u043e\u043c\u043c\u0438\u0442\u0438\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438 \u0436\u0434\u0435\u043c \u043a\u043e\u0433\u0434\u0430 CI/CD \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438 \u0440\u0443\u043a\u0430\u043c\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0447\u0442\u043e \u0441\u0430\u0439\u0442 ",(0,s.jsx)(n.a,{href:"http://fullstack.nestjs-mod.com:30222",children:"http://fullstack.nestjs-mod.com:30222"})," \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442"]}),"\n",(0,s.jsxs)(n.p,{children:["\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u0430\u0439\u0442: ",(0,s.jsx)(n.a,{href:"https://fullstack.nestjs-mod.com",children:"https://fullstack.nestjs-mod.com"})]}),"\n",(0,s.jsx)(n.h3,{id:"\u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435",children:"\u0417\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435"}),"\n",(0,s.jsx)(n.p,{children:"\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435 Ingress \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e \u043a\u0430\u043a \u043f\u0440\u043e\u043a\u0441\u0438 \u0434\u043e \u043d\u0430\u0448\u0435\u0433\u043e \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e Nginx \u0441 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u043c \u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c \u0438 \u0432\u0441\u0435 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u0435 \u043d\u043e\u0432\u044b\u0435 \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b \u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0437\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0438 \u043a \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u043d\u0443\u0436\u0435\u043d \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f \u0441\u043d\u0430\u0440\u0443\u0436\u0438, \u0442\u0430\u043a\u0436\u0435 \u0431\u0443\u0434\u0443\u0442 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043d\u0430\u0448\u0435\u043c \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c Nginx."}),"\n",(0,s.jsx)(n.p,{children:"\u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 Nginx \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u043d\u0430\u0448\u0438\u043c\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0443\u0436\u0435\u043d \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432\u0441\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0431\u0435\u0437 Kubernetes \u0438 \u043d\u0435 \u043f\u0440\u0438\u0448\u043b\u043e\u0441\u044c \u0438\u043c\u0435\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u0441 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439 Nginx."}),"\n",(0,s.jsx)(n.h3,{id:"\u043f\u043b\u0430\u043d\u044b",children:"\u041f\u043b\u0430\u043d\u044b"}),"\n",(0,s.jsx)(n.p,{children:"\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c \u043f\u043e\u0441\u0442\u0435 \u044f \u0434\u043e\u0431\u0430\u0432\u043b\u044e \u0441\u0435\u043c\u0430\u043d\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0432\u0435\u0440\u0441\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u0445 \u0444\u0430\u0439\u043b\u0430\u0445..."}),"\n",(0,s.jsx)(n.h3,{id:"\u0441\u0441\u044b\u043b\u043a\u0438",children:"\u0421\u0441\u044b\u043b\u043a\u0438"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://nestjs.com",children:"https://nestjs.com"})," - \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0430\u0439\u0442 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u0430"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://nestjs-mod.com",children:"https://nestjs-mod.com"})," - \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0430\u0439\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0443\u0442\u0438\u043b\u0438\u0442"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://fullstack.nestjs-mod.com",children:"https://fullstack.nestjs-mod.com"})," - \u0441\u0430\u0439\u0442 \u0438\u0437 \u043f\u043e\u0441\u0442\u0430"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/nestjs-mod/nestjs-mod-fullstack",children:"https://github.com/nestjs-mod/nestjs-mod-fullstack"})," - \u043f\u0440\u043e\u0435\u043a\u0442 \u0438\u0437 \u043f\u043e\u0441\u0442\u0430"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/nestjs-mod/nestjs-mod-fullstack/compare/28ebc77b38b2b1c9945e87806e5726451b8d22a2..33b51edf67471600e583f89f10b2d99a1b9b79da",children:"https://github.com/nestjs-mod/nestjs-mod-fullstack/compare/28ebc77b38b2b1c9945e87806e5726451b8d22a2..33b51edf67471600e583f89f10b2d99a1b9b79da"})," - \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"#kubernetes #github #nestjsmod #fullstack\n#2024-09-15"})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var s=r(6540);const t={},c=s.createContext(t);function a(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);