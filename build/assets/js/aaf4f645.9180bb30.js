"use strict";(self.webpackChunknestjs_mod_com=self.webpackChunknestjs_mod_com||[]).push([[222],{9249:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var n=s(4848),r=s(8453);const i={},o="@nestjs-mod/terminus",a={id:"packages/system/terminus/README",title:"@nestjs-mod/terminus",description:"Terminus integration provides readiness/liveness health checks for NestJS-mod (Wrapper for https://www.npmjs.com/package/@nestjs/terminus)",source:"@site/docs/packages/system/terminus/README.md",sourceDirName:"packages/system/terminus",slug:"/packages/system/terminus/",permalink:"/docs/packages/system/terminus/",draft:!1,unlisted:!1,editUrl:"https://github.com/nestjs-mod/nestjs-mod.com/blob/master/docs/packages/system/terminus/README.md",tags:[],version:"current",frontMatter:{},sidebar:"packagesSidebar",previous:{title:"@nestjs-mod/pino",permalink:"/docs/packages/system/nestjs-pino/"},next:{title:"@nestjs-mod/testing",permalink:"/docs/packages/system/testing"}},d={},l=[{value:"Installation",id:"installation",level:2},{value:"Modules",id:"modules",level:2},{value:"Modules descriptions",id:"modules-descriptions",level:2},{value:"TerminusHealthCheckModule",id:"terminushealthcheckmodule",level:3},{value:"Use in NestJS",id:"use-in-nestjs",level:4},{value:"Use in NestJS-mod",id:"use-in-nestjs-mod",level:4},{value:"Shared providers",id:"shared-providers",level:4},{value:"Shared imports",id:"shared-imports",level:4},{value:"Configuration",id:"configuration",level:4},{value:"Static configuration",id:"static-configuration",level:4},{value:"Feature configuration",id:"feature-configuration",level:4},{value:"Links",id:"links",level:2},{value:"License",id:"license",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"nestjs-modterminus",children:"@nestjs-mod/terminus"}),"\n",(0,n.jsxs)(t.p,{children:["Terminus integration provides readiness/liveness health checks for NestJS-mod (Wrapper for ",(0,n.jsx)(t.a,{href:"https://www.npmjs.com/package/@nestjs/terminus",children:"https://www.npmjs.com/package/@nestjs/terminus"}),")"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://npmjs.org/package/@nestjs-mod/terminus",children:(0,n.jsx)(t.img,{src:"https://badgen.net/npm/v/@nestjs-mod/terminus",alt:"NPM version"})})," ",(0,n.jsx)(t.a,{href:"https://npmjs.org/package/@nestjs-mod/terminus",children:(0,n.jsx)(t.img,{src:"https://badgen.net/npm/dm/@nestjs-mod/terminus",alt:"monthly downloads"})})," ",(0,n.jsx)(t.a,{href:"https://t.me/nestjs_mod",children:(0,n.jsx)(t.img,{src:"https://img.shields.io/badge/group-telegram-blue.svg?maxAge=2592000",alt:"Telegram"})})," ",(0,n.jsx)(t.a,{href:"https://discord.gg/meY7UXaG",children:(0,n.jsx)(t.img,{src:"https://img.shields.io/badge/discord-online-brightgreen.svg",alt:"Discord"})})]}),"\n",(0,n.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npm i --save @nestjs/terminus @nestjs-mod/terminus\n"})}),"\n",(0,n.jsx)(t.h2,{id:"modules",children:"Modules"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Link"}),(0,n.jsx)(t.th,{children:"Category"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsx)(t.tbody,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"#terminushealthcheckmodule",children:"TerminusHealthCheckModule"})}),(0,n.jsx)(t.td,{children:"system"}),(0,n.jsxs)(t.td,{children:["Terminus integration provides readiness/liveness health checks for NestJS-mod (Wrapper for ",(0,n.jsx)(t.a,{href:"https://www.npmjs.com/package/@nestjs/terminus",children:"https://www.npmjs.com/package/@nestjs/terminus"}),")"]})]})})]}),"\n",(0,n.jsx)(t.h2,{id:"modules-descriptions",children:"Modules descriptions"}),"\n",(0,n.jsx)(t.h3,{id:"terminushealthcheckmodule",children:"TerminusHealthCheckModule"}),"\n",(0,n.jsxs)(t.p,{children:["Terminus integration provides readiness/liveness health checks for NestJS-mod (Wrapper for ",(0,n.jsx)(t.a,{href:"https://www.npmjs.com/package/@nestjs/terminus",children:"https://www.npmjs.com/package/@nestjs/terminus"}),")"]}),"\n",(0,n.jsx)(t.h4,{id:"use-in-nestjs",children:"Use in NestJS"}),"\n",(0,n.jsx)(t.p,{children:"Example of use feature configurations and use standardHealthIndicators."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"import { TerminusHealthCheckModule, TerminusHealthCheckFeatureConfiguration } from '@nestjs-mod/terminus';\nimport { NestFactory } from '@nestjs/core';\n\nimport { Module } from '@nestjs/common';\nimport { HealthIndicatorStatus, MemoryHealthIndicator } from '@nestjs/terminus';\n\nexport class FeatureTerminusHealthCheckFeatureConfiguration implements TerminusHealthCheckFeatureConfiguration {\n  name = 'Feature';\n  async isHealthy() {\n    return {\n      feature: {\n        status: 'up' as HealthIndicatorStatus,\n      },\n    };\n  }\n}\n\n@Module({\n  imports: [\n    TerminusHealthCheckModule.forFeature({\n      featureModuleName: 'feature',\n      featureConfiguration: new FeatureTerminusHealthCheckFeatureConfiguration(),\n    }),\n  ],\n})\nexport class FeatureModule {}\n\n@Module({\n  imports: [\n    TerminusHealthCheckModule.forRootAsync({\n      configurationFactory: (memoryHealthIndicator: MemoryHealthIndicator) => ({\n        standardHealthIndicators: [\n          { name: 'memory_heap', check: () => memoryHealthIndicator.checkHeap('memory_heap', 150 * 1024 * 1024) },\n        ],\n      }),\n      inject: [MemoryHealthIndicator],\n    }),\n    FeatureModule,\n  ],\n})\nexport class AppModule {}\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n  await app.listen(3000);\n}\n\nbootstrap();\n"})}),"\n",(0,n.jsx)(t.h4,{id:"use-in-nestjs-mod",children:"Use in NestJS-mod"}),"\n",(0,n.jsxs)(t.p,{children:["An example of using forRoot with parameters and use feature configurations with use standardHealthIndicators, you can see the full example here ",(0,n.jsx)(t.a,{href:"https://github.com/nestjs-mod/nestjs-mod-contrib/tree/master/apps/example-terminus",children:"https://github.com/nestjs-mod/nestjs-mod-contrib/tree/master/apps/example-terminus"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"import {\n  DefaultNestApplicationInitializer,\n  DefaultNestApplicationListener,\n  bootstrapNestApplication,\n  createNestModule,\n} from '@nestjs-mod/common';\nimport { TerminusHealthCheckModule, TerminusHealthCheckFeatureConfiguration } from '@nestjs-mod/terminus';\nimport { HealthIndicatorStatus, MemoryHealthIndicator } from '@nestjs/terminus';\n\nexport class FeatureTerminusHealthCheckFeatureConfiguration implements TerminusHealthCheckFeatureConfiguration {\n  name = 'Feature';\n  async isHealthy() {\n    return {\n      feature: {\n        status: 'up' as HealthIndicatorStatus,\n      },\n    };\n  }\n}\n\nexport const { FeatureModule } = createNestModule({\n  moduleName: 'FeatureModule',\n  imports: [\n    TerminusHealthCheck.forFeature({\n      featureModuleName: 'feature',\n      featureConfiguration: new FeatureTerminusHealthCheckFeatureConfiguration(),\n    }),\n  ],\n});\n\nbootstrapNestApplication({\n  modules: {\n    system: [\n      DefaultNestApplicationInitializer.forRoot(),\n      TerminusHealthCheckModule.forRootAsync({\n        configurationFactory: (memoryHealthIndicator: MemoryHealthIndicator) => ({\n          standardHealthIndicators: [\n            { name: 'memory_heap', check: () => memoryHealthIndicator.checkHeap('memory_heap', 150 * 1024 * 1024) },\n          ],\n        }),\n        inject: [MemoryHealthIndicator],\n      }),\n      DefaultNestApplicationListener.forRoot({ staticEnvironments: { port: 3000 } }),\n    ],\n    feature: [FeatureModule.forRoot()],\n  },\n});\n"})}),"\n",(0,n.jsx)(t.h4,{id:"shared-providers",children:"Shared providers"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.code,{children:"TerminusHealthCheckService"})}),"\n",(0,n.jsx)(t.h4,{id:"shared-imports",children:"Shared imports"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.code,{children:"TerminusModule"})}),"\n",(0,n.jsx)(t.h4,{id:"configuration",children:"Configuration"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Key"}),(0,n.jsx)(t.th,{children:"Description"}),(0,n.jsx)(t.th,{children:"Constraints"}),(0,n.jsx)(t.th,{children:"Default"}),(0,n.jsx)(t.th,{children:"Value"})]})}),(0,n.jsx)(t.tbody,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"standardHealthIndicators"})}),(0,n.jsxs)(t.td,{children:["Standard health indicators @see ",(0,n.jsx)(t.a,{href:"https://docs.nestjs.com/recipes/terminus#setting-up-a-healthcheck",children:"https://docs.nestjs.com/recipes/terminus#setting-up-a-healthcheck"})]}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.strong,{children:"optional"})}),(0,n.jsx)(t.td,{children:"-"}),(0,n.jsx)(t.td,{children:"-"})]})})]}),"\n",(0,n.jsx)(t.h4,{id:"static-configuration",children:"Static configuration"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Key"}),(0,n.jsx)(t.th,{children:"Description"}),(0,n.jsx)(t.th,{children:"Constraints"}),(0,n.jsx)(t.th,{children:"Default"}),(0,n.jsx)(t.th,{children:"Value"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"endpoint"})}),(0,n.jsx)(t.td,{children:"Rest endpoint for health check"}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.strong,{children:"optional"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"health"})}),(0,n.jsx)(t.td,{children:"-"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"errorLogStyle"})}),(0,n.jsx)(t.td,{children:"The style of the error logger @default 'json'"}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.strong,{children:"optional"})}),(0,n.jsx)(t.td,{children:"-"}),(0,n.jsx)(t.td,{children:"-"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"logger"})}),(0,n.jsx)(t.td,{children:"The logger to use. Either default logger or your own."}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.strong,{children:"optional"})}),(0,n.jsx)(t.td,{children:"-"}),(0,n.jsx)(t.td,{children:"-"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"gracefulShutdownTimeoutMs"})}),(0,n.jsx)(t.td,{children:"The timeout to wait in ms before the application shuts down @default 0"}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.strong,{children:"optional"})}),(0,n.jsx)(t.td,{children:"-"}),(0,n.jsx)(t.td,{children:"-"})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"feature-configuration",children:"Feature configuration"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Key"}),(0,n.jsx)(t.th,{children:"Description"}),(0,n.jsx)(t.th,{children:"Constraints"}),(0,n.jsx)(t.th,{children:"Default"}),(0,n.jsx)(t.th,{children:"Value"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"name"})}),(0,n.jsx)(t.td,{children:"Name of health check"}),(0,n.jsxs)(t.td,{children:[(0,n.jsx)(t.strong,{children:"isNotEmpty"})," (name should not be empty)"]}),(0,n.jsx)(t.td,{children:"-"}),(0,n.jsx)(t.td,{children:"-"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"isHealthy"})}),(0,n.jsx)(t.td,{children:"Logic for health check"}),(0,n.jsxs)(t.td,{children:[(0,n.jsx)(t.strong,{children:"isNotEmpty"})," (isHealthy should not be empty)"]}),(0,n.jsx)(t.td,{children:"-"}),(0,n.jsx)(t.td,{children:"-"})]})]})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"#modules",children:"Back to Top"})}),"\n",(0,n.jsx)(t.h2,{id:"links",children:"Links"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://github.com/nestjs-mod/nestjs-mod",children:"https://github.com/nestjs-mod/nestjs-mod"})," - A collection of utilities for unifying NestJS applications and modules"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://github.com/nestjs-mod/nestjs-mod-contrib",children:"https://github.com/nestjs-mod/nestjs-mod-contrib"})," - Contrib repository for the NestJS-mod"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://github.com/nestjs-mod/nestjs-mod-example",children:"https://github.com/nestjs-mod/nestjs-mod-example"})," - Example application built with ",(0,n.jsx)(t.a,{href:"https://github.com/nestjs-mod/nestjs-mod/tree/master/libs/schematics",children:"@nestjs-mod/schematics"})]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://github.com/nestjs-mod/nestjs-mod/blob/master/apps/example-basic/INFRASTRUCTURE.MD",children:"https://github.com/nestjs-mod/nestjs-mod/blob/master/apps/example-basic/INFRASTRUCTURE.MD"})," - A simple example of infrastructure documentation."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://github.com/nestjs-mod/nestjs-mod-contrib/blob/master/apps/example-prisma/INFRASTRUCTURE.MD",children:"https://github.com/nestjs-mod/nestjs-mod-contrib/blob/master/apps/example-prisma/INFRASTRUCTURE.MD"})," - An extended example of infrastructure documentation with a docker-compose file and a data base."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://dev.to/endykaufman/collection-of-nestjs-mod-utilities-for-unifying-applications-and-modules-on-nestjs-5256",children:"https://dev.to/endykaufman/collection-of-nestjs-mod-utilities-for-unifying-applications-and-modules-on-nestjs-5256"})," - Article about the project NestJS-mod"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://habr.com/ru/articles/788916",children:"https://habr.com/ru/articles/788916"})," - \u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0443\u0442\u0438\u043b\u0438\u0442 NestJS-mod \u0434\u043b\u044f \u0443\u043d\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u0438 \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u043d\u0430 NestJS"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"license",children:"License"}),"\n",(0,n.jsx)(t.p,{children:"MIT"})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>a});var n=s(6540);const r={},i=n.createContext(r);function o(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);